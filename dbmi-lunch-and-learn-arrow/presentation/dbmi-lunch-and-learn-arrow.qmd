---
title: |
  Cross-language <br>
  Data Development <br> 
  with Apache Arrow <br><br>

subtitle: "DBMI Lunch & Learn"
description-meta: |
    Tired of running into data development challenges like conversion, datatyping, and performance without a unified standard? This talk will cover Apache Arrow: a unique opportunity to enable standardized multi-lingual and high-performance data development. We'll cover a brief background, how Arrow compares to similar software, and some development examples.
author: "Dave Bunten"
format:
  revealjs: 
    theme: simple
    transition: slide
    slide-number: true
    auto-stretch: false
---

## Brief Introduction

<br>

üëãü§ì Hi, I'm Dave

<br>

University of Colorado Anschutz Medical Campus<br> Department of Biomedical Informatics<br> Software Engineering Team

------------------------------------------------------------------------

## Presentation Outline

<br>

1.  ‚úçÔ∏è Data Literacy, Data Grammar, and Software Diversity
2.  üìö Apache Arrow
3.  ‚èØÔ∏è Demonstrations

------------------------------------------------------------------------

## Preface

<br>

Why does this matter?

![](2023-04-17-10-18-33.png)

-   Data is locked away until made available to others.

-   How can you free your data to create opportunity?

------------------------------------------------------------------------

## Data Literacy

<br>

Data Literacy ([Wikipedia](https://en.wikipedia.org/wiki/Data_literacy))

> *"Data literacy is the ability to read, understand, create, and communicate data as information."*

------------------------------------------------------------------------

## Data Literacy

<br>

![](2023-04-12-08-49-53.png)

How we might imagine data conversations.

------------------------------------------------------------------------

## Data Literacy

<br>

![](2023-04-12-09-13-23.png)

The spreadsheets should be the same, right?

------------------------------------------------------------------------

## Data Literacy

<br>

What is data, ***really***?

<br>

-   What is a "datatype"?
-   What is a "table"?
-   What is a "schema"?
-   What is a "dataframe"?

------------------------------------------------------------------------

## Data Literacy

<br>

A CSV file:

<br>

``` csv
a_string , b_int , c_float
"dog"    , 1     , NaN
'cat'    , NULL  ,  "0.2f"
         , 3     ,  0.8
```

<br>

What datatypes are these columns?

------------------------------------------------------------------------

## Data Literacy

<br>

![](2023-04-12-08-55-53.png)

We can develop our way around this!

------------------------------------------------------------------------

## Data Literacy

<br>

+--------------------------+--------------------------------------+
| R data.table             | Python Pandas.DataFrame              |
+==========================+======================================+
| ``` r                    | ``` python                           |
| library(data.table)      | import pandas as pd                  |
|                          |                                      |
| DT = as.data.table(iris) | df = pd.read_csv(...)                |
|                          |                                      |
| DT[Petal.Width > 1.0,    | df[df["Petal.Width"] > 1.0].groupby( |
|    mean(Petal.Length),   |     "Species"                        |
|    by = Species]         | )["Petal.Length"].mean()             |
| ```                      | ```                                  |
+--------------------------+--------------------------------------+

<br>

How different could R and Python be?

------------------------------------------------------------------------

## Data Literacy

<br>

<br>


Maybe it gets better if we choose one language?

------------------------------------------------------------------------

## Data Literacy

<br>


![](2023-04-12-09-02-26.png)

They're all just dataframes, right?

------------------------------------------------------------------------

## Data Literacy

<br>

<br>

Which data approach is more ***"correct"***?

------------------------------------------------------------------------

## Data Grammar

<br>

![](2023-04-17-13-35-23.png)

In addition to understanding what data is (**literacy**),<br> we need ways to use the data too (**grammar**).

------------------------------------------------------------------------

## Data Grammar

<br>

![](2023-04-18-11-08-09.png)

We often assume data stored in a file will be the same as data in memory.

------------------------------------------------------------------------

## Data Grammar

<br>

![](2023-04-18-10-16-54.png)

Each processor uses opinionated translations.

------------------------------------------------------------------------

## Data Grammar

<br>

-   Each translation without a common grammar is different.
-   How much can we hope to understand one another?

------------------------------------------------------------------------

## Data Grammar

<br>

![](2023-04-17-13-21-41.png)

Music notes and how they are played together.

<br>

[[**Image from Wikimedia Commons: Public Domain**](https://commons.wikimedia.org/wiki/File:MozartClarConII.png)]{style="font-size:.5em"}

------------------------------------------------------------------------

## Data Grammar

<br>

<br>

-   What kind of data "music" do you play?

-   How does your "band" play together?

------------------------------------------------------------------------

## Software Diversity

<br>

ü™¥ **Software gardening:**

A practice of growing and cultivating software using parallels from horticulture.

------------------------------------------------------------------------

## Software Diversity

![](2023-04-12-09-58-07.png)

Software can follow patterns from life.

------------------------------------------------------------------------

## Software Diversity

<br>

![](2023-04-18-11-17-50.png)

Time influences software.

------------------------------------------------------------------------

## Software Diversity

![](2023-04-18-10-47-59.png)

Single-stack or mono-lingual restrictions <br>for your ecosystem means isolation.

------------------------------------------------------------------------

## Software Diversity

![](2023-04-18-10-49-12.png)

Isolation may mean lower chances of survival (what's next?).

------------------------------------------------------------------------

## Software Diversity

<br>

-   How can software diversity and common <br>data grammar be handled together?
-   Isn't this all contradictory?

------------------------------------------------------------------------

## Apache Arrow

<br>

![](assets/arrow.png)

<br> Apache Arrow is a library for processing<br> data across many languages.

([https://arrow.apache.org](https://arrow.apache.org/))

------------------------------------------------------------------------

## Apache Arrow

![](2023-04-18-11-08-48.png)

A data grammar to enable software diversity.

------------------------------------------------------------------------

## Apache Arrow

<br>

Arrow's key features:

- __Language interoperability__ <br>(bindings for R, Python, Julia, Java, more...)
- __Metadata compatibility and availability__ <br>(types, schema, descriptions, more...)
- __"zero-copy" availability__ <br>(shared memory buffers, avoid conversions)


------------------------------------------------------------------------

## Apache Arrow

<br>

![](2023-04-18-15-36-41.png)

An example of "zero-copy" at work between R and Python.

------------------------------------------------------------------------

## Apache Arrow - Concepts

<br>

<br>

Covering a few brief concepts (there's much more!).

------------------------------------------------------------------------

## Apache Arrow - Concepts

![](2023-04-18-14-57-01.png)

**Arrays** are "columns": they include values of a single type.

------------------------------------------------------------------------

## Apache Arrow

![](2023-04-18-14-37-06.png)

Array **Fields** may include a name, data type, and other metadata.

------------------------------------------------------------------------

## Apache Arrow

![](2023-04-18-14-38-27.png)

**Record Batches** are collections of arrays.

------------------------------------------------------------------------

## Apache Arrow

![](2023-04-18-14-45-00.png){width="600"}

**Tables** are collections of Record Batches.

------------------------------------------------------------------------

## Apache Arrow

![](2023-04-18-14-51-10.png){width="680"}

Tables include **Schema** which collect fields, data description, and metadata tools.
